## 　　Lesson2.　入力パラメータを利用してURLを組み立てる
#### 開発メモ
ワークフロー
<br><img width="600" src="https://user-images.githubusercontent.com/40127279/126853536-aaa978e7-db52-446e-9942-73c0781e7ef7.png">
### 1.英語と日本語のキーワードで起動させる
　RunScriptのインプットとなるキーワードを2つ繋げるだけでOKです
<br>　パラメータが全角の場合があることを考慮して、スクリプトで半角化しています
### 2.全角数字を半角に変換する
　Sedコマンドで変換しています。数字だけなので、見た目でわかりやすいスクリプトですね
<br>　よく見る例では0〜9と並べていますが、試しに9〜0としてみました。もちろん動きます
<br>　`sed 'y/９８７６５４３２１０/9876543210/'`
### 3.コマンドの結果を変数に格納する
　バックスラッシュで囲むとコマンドの結果を変数に代入できます
<br>　下記のコードは、$1の数字部分を半角化して変数queryに格納します
<br>　```query=`echo $1|sed 'y/９８７６５４３２１０/9876543210/'` ```
<br>　ちなみに私はUK配列キーボードなので、バックスラッシュが簡単に入力できます
### 4.文字列の部分参照
　timelineのURLに必要なyyyy-mm-ddを作成する際にパラメータを部分参照します
<br>　queryには入力されたyyyymmdd形式の日付けが入っている想定です。
<br>　`＄{query:0:4}"-"${query:4:2}"-"${query:6:2}`
<br>　部分参照の構文は　${変数:開始位置:長さ}　となりますが、開始位置は
<br>　先頭が0となります
<br>　※ちなみにyyyy-mm-ddとしてユーザーから入力させるのであれば
<br>　FeaturesのWeb Searchのカスタム検索で実現する方が簡単です
<br>　”-”をユーザーに書かせない点が、実はこのワークフローの肝なのです
### 5.URLを開く
　ワークフローのオブジェクトを使わずにスクリプトからOPENをしてみました
<br>　英数字だけのURLならopenで良さそうです
<br>　日本語がある場合は%エンコードが必要になりそうな気がします
<br>
<br>RunScript
<br><img width="600" src="https://user-images.githubusercontent.com/40127279/126853565-1a680fd3-3aaf-4081-a6a0-cc6a7a75f3e9.png">


#### 背景
　趣味で一眼レフを使って風景写真を撮っています
<br>　写真の位置情報はスマホから取得する筈なのですが、スマホとカメラが連携する前に
<br>　撮影が完了してしまい位置情報が取得できないことがよくあります
<br>　そこで撮影日から訪れた場所を確認するためにこのツールを作ってみました
#### 取扱説明
### 機能:
　特定の日付のgoogle timelineを表示させる
### インストール:
　1.[alfredworkflow](https://github.com/KitanoTamotsu/googletimeline/files/6721071/Google.Timeline.alfredworkflow.zip)をダウンロード 
<br>　2.ファイルをダブルクリックしてワークフローに登録
### 使い方:
　Alfredからキーワードで起動
<br>　`gt yyyymmdd`
<br>　または
<br>　`場所 yyyymmdd`
<br>　※私がalfredを日本語でweb検索に使うことが多いので、日本語でも起動できるようにしました
<br>　”場所”よりも”アリバイ”みたいなキーワードが良いかも。。。
<br>
<br>
[トップページに戻る](https://kitanotamotsu.github.io/)

